<mvc:View controllerName="flexso.cap.htf.securityoverview.controller.Master"
    xmlns="sap.uxap"
    xmlns:m="sap.m"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core">
    <ObjectPageLayout
        id="id.ObjectPageLayout"
        busy="{appView>/busy}"
        busyIndicatorDelay="100"
        preserveHeaderStateOnScroll="true"
        toggleHeaderOnTitleClick="false">
        <headerTitle>
            <ObjectPageDynamicHeaderTitle>
                <content>
                    <m:Title text="Subnautic Security Terminal" />
                </content>
            </ObjectPageDynamicHeaderTitle>
        </headerTitle>

        <headerContent>
            <ObjectPageDynamicHeaderTitle>
                <content>
                    <m:HBox alignItems="Center">
                        <m:Select
                            id="locationSelect"
                            change="onSelectLocation"
                            width="250px"
                            items="{/SubnauticLocation}">
                            <core:Item key="{ID}" text="{name}" />
                        </m:Select>
                    </m:HBox>
                </content>
            </ObjectPageDynamicHeaderTitle>
        </headerContent>

        <sections>
            <ObjectPageSection showTitle="false" visible="{= !${appView>/hasSelectedLocation} }">
                <subSections>
                    <ObjectPageSubSection class="sapUxAPObjectPageSubSectionFitContainer">
                        <m:Table
                            headerText="Camera Installation Status"
                            items="{path: '/SubnauticLocation', parameters: {$expand: 'closestCamera'}}">
                            <m:columns>
                                <m:Column><m:Text text="Location" /></m:Column>
                                <m:Column><m:Text text="Camera Status" /></m:Column>
                            </m:columns>
                            <m:items>
                                <m:ColumnListItem>
                                    <m:cells>
                                        <m:Text text="{name}" />
                                        <m:ObjectStatus
                                            text="{closestCamera/status}"
                                            state="{= ${closestCamera/status} === 'Online' ? 'Success' : 'Error' }" />
                                    </m:cells>
                                </m:ColumnListItem>
                            </m:items>
                        </m:Table>
                    </ObjectPageSubSection>
                </subSections>
            </ObjectPageSection>
            <ObjectPageSection showTitle="false" visible="{appView>/hasSelectedLocation}">
                <subSections>
                    <ObjectPageSubSection class="sapUxAPObjectPageSubSectionFitContainer">
                        <m:VBox class="sapUiSmallMargin">
                            <m:Title text="{subnauticLocation/name}" titleStyle="H2" />
                            <m:Text text="{subnauticLocation/description}" class="sapUiSmallMarginBottom"/>
                            <m:Image src="{recording}" width="100%" />
                        </m:VBox>
                    </ObjectPageSubSection>
                </subSections>
            </ObjectPageSection>
        </sections>
    </ObjectPageLayout>
</mvc:View>