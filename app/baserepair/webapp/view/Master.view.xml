<mvc:View controllerName="flexso.cap.htf.baserepair.controller.Master"
    xmlns:f="sap.ui.layout.form"
    xmlns:core="sap.ui.core"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:m="sap.suite.ui.commons"
    xmlns="sap.m">
    <Page id="idPage" title="Product: Security Camera" class="sapUiResponsivePadding--header">
        <!-- this CSS class add a standard spacing to all the page content -->

        <content>
            <ObjectHeader id="_IDGenObjectHeader" title="{name}" backgroundDesign="Solid">
                <attributes>
                    <ObjectAttribute id="_IDGenObjectAttribute1" title="Weight" text="{weight}" />
                    <ObjectAttribute id="_IDGenObjectAttribute2" title="Dimensions" text="{dimensions}" />
                    <ObjectAttribute id="_IDGenObjectAttribute" title="Color" text="{color}" />
                </attributes>
                <statuses>
                    <ObjectStatus id="_IDGenObjectStatus" title="Amount in Stock" text="{amountInStock}" state="Success" />
                </statuses>
            </ObjectHeader>
            <IconTabBar id="_IDGenIconTabBar" expanded="true" class="sapUiSmallMarginBottom sapUiResponsiveContentPadding">
                <items>
                    <!-- Parts / Materials tab -->
                    <IconTabFilter text="Parts">
                        <VBox class="sapUiSmallMargin">
                            <Table id="idMaterialTable"
                                items="{materials}">
                                <headerToolbar>
                                    <Toolbar>
                                        <Title text="Materials" />
                                        <ToolbarSpacer />
                                        <Button icon="sap-icon://create" text="Order" press="order" />
                                        <Button icon="sap-icon://synchronize" type="Transparent" press="refresh" />
                                    </Toolbar>
                                </headerToolbar>

                                <columns>
                                    <Column><Text text="Material" /></Column>
                                    <Column><Text text="ID" /></Column>
                                    <Column><Text text="Amount" /></Column>
                                    <Column><Text text="Order" /></Column>
                                </columns>

                                <items>
                                    <ColumnListItem>
                                        <cells>
                                            <ObjectIdentifier title="{name}" />
                                            <Text text="{ID}" />
                                            <ObjectNumber number="{amountInStock}" unit="pcs" />
                                            <Text text="{amountOrderd}" />
                                        </cells>
                                    </ColumnListItem>
                                </items>
                            </Table>
                        </VBox>
                    </IconTabFilter>
                    <IconTabFilter id="_IDGenIconTabFilter1" key="Production" text="Production">
                        <Button id="_IDGenButton" text="Produce {name}" press="produce"></Button>
                        <Button id="_IDGenButton5" icon="sap-icon://synchronize" type="Transparent" press="refeshProducton"></Button>
                        <m:ProcessFlow id="processflow" scrollable="true" lanes="{
							path: '/Production',
							parameters: {
								$expand: {
                                    state: {
                                    $select: ['state','value'] }
                                }
							}
						}">
                            <m:lanes>
                                <m:ProcessFlowLaneHeader id="_IDGenProcessFlowLaneHeader" laneId="{ID}" iconSrc="{icon}" text="{label}" position="{position}" state="{path: 'state', formatter:'.formatter.stateFormatter', targetType:'any'}" />
                            </m:lanes>
                        </m:ProcessFlow>
                    </IconTabFilter>
                    <IconTabFilter key="Installations" text="Installations">
                        <VBox class="sapUiSmallMargin">
                            <Table id="idInstallationsTable" items="{installations}">
                                <headerToolbar>
                                    <Toolbar>
                                        <Title text="Installations" />
                                        <ToolbarSpacer />
                                        <Button icon="sap-icon://synchronize" press="refresh" type="Transparent" />
                                    </Toolbar>
                                </headerToolbar>

                                <columns>
                                    <Column><Text text="Location" /></Column>
                                    <Column><Text text="Status" /></Column>
                                    <Column><Text text="Product" /></Column>
                                    <Column hAlign="Center" width="8rem"><Text text="Action" /></Column>
                                </columns>

                                <items>
                                    <ColumnListItem>
                                        <cells>
                                            <Text text="{location}" />
                                            <ObjectStatus text="{status}" state="{= ${status} === 'Fine' ? 'Success' : 'Error'}" />
                                            <Text text="{product}" />
                                            <Button text="Replace"
                                                    type="Emphasized"
                                                    press=".replaceCamera"
                                                    enabled="{= ${status} === 'Damaged'}" />
                                        </cells>
                                    </ColumnListItem>
                                </items>
                            </Table>
                        </VBox>
                    </IconTabFilter>
                </items>
            </IconTabBar>
        </content>
    </Page>
</mvc:View>